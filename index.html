<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java Portfolio | 3D Game Experience</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Segoe UI', Roboto, sans-serif; background-color: #000; }
        canvas { display: block; }

        /* Interface Sobreposta */
        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 40px;
            box-sizing: border-box;
        }

        .header h1 { 
            margin: 0; 
            font-size: 3rem; 
            text-transform: uppercase; 
            letter-spacing: 5px;
            color: #f89820; /* Cor Laranja Java */
            text-shadow: 0 0 15px rgba(248, 152, 32, 0.6);
        }

        .controls-hint {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            width: fit-content;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Card de Projeto/Habilidade */
        #info-card {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(10, 10, 10, 0.95);
            border: 2px solid #f89820;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            pointer-events: all;
            display: none;
            box-shadow: 0 0 50px rgba(248, 152, 32, 0.3);
        }

        #info-card h2 { color: #f89820; margin-top: 0; }
        #info-card p { line-height: 1.6; color: #ccc; }
        
        button {
            background: #f89820;
            border: none;
            padding: 12px 30px;
            color: white;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }
        button:hover { background: #e38410; transform: scale(1.05); }

        .active { display: block !important; }
    </style>
</head>
<body>

    <div id="ui-layer">
        <div class="header">
            <h1>JAVA DEVELOPER</h1>
            <p>Fullstack & Cloud Specialist</p>
        </div>

        <div id="info-card">
            <h2 id="title">Título</h2>
            <p id="desc">Descrição detalhada do projeto ou habilidade em Java.</p>
            <button onclick="closeInfo()">CONTINUAR EXPLORANDO</button>
        </div>

        <div class="controls-hint">
            <b>COMANDOS:</b> Use <b>W, A, S, D</b> para navegar pela rede.
        </div>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';

        // --- CONFIGURAÇÃO DA CENA ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // --- CHÃO (GRID ESTILO TRON/JAVA) ---
        const gridHelper = new THREE.GridHelper(100, 50, 0xf89820, 0x222222);
        scene.add(gridHelper);

        // --- ILUMINAÇÃO ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);
        const light = new THREE.PointLight(0xf89820, 100);
        light.position.set(0, 5, 0);
        scene.add(light);

        // --- JOGADOR (ESFERA NEON) ---
        const playerGeo = new THREE.SphereGeometry(0.5, 32, 32);
        const playerMat = new THREE.MeshStandardMaterial({ 
            color: 0xffffff, 
            emissive: 0x00f2ff,
            emissiveIntensity: 2
        });
        const player = new THREE.Mesh(playerGeo, playerMat);
        player.position.y = 0.5;
        scene.add(player);

        // --- DATA DE PROJETOS E SKILLS ---
        const markers = [
            { x: 5, z: -10, title: "Spring Boot API", desc: "Desenvolvimento de microserviços escaláveis com autenticação JWT e Docker.", color: 0xed1c24 },
            { x: -8, z: -15, title: "Java Core", desc: "Domínio de Collections, Streams API, Multithreading e Padrões de Projeto.", color: 0x5382a1 },
            { x: 10, z: -20, title: "Banco de Dados", desc: "Integração robusta com Hibernate, JPA e PostgreSQL.", color: 0x00758f },
            { x: -5, z: -5, title: "Cloud AWS", desc: "Deploy de aplicações Java em instâncias EC2 e uso de S3.", color: 0xff9900 }
        ];

        const markerMeshes = [];

        markers.forEach(data => {
            // Criar um "Totem" para cada projeto
            const geometry = new THREE.BoxGeometry(1.5, 3, 1.5);
            const material = new THREE.MeshStandardMaterial({ color: data.color, metalness: 0.7, roughness: 0.2 });
            const mesh = new THREE.Mesh(geometry, material);
            mesh.position.set(data.x, 1.5, data.z);
            mesh.userData = data;
            scene.add(mesh);
            markerMeshes.push(mesh);

            // Luz em cima do totem
            const pLight = new THREE.PointLight(data.color, 10, 5);
            pLight.position.set(data.x, 4, data.z);
            scene.add(pLight);
        });

        // --- LÓGICA DE MOVIMENTO ---
        const keys = {};
        window.onkeydown = (e) => keys[e.key.toLowerCase()] = true;
        window.onkeyup = (e) => keys[e.key.toLowerCase()] = false;

        const infoCard = document.getElementById('info-card');
        let cardOpen = false;

        function update() {
            if (cardOpen) return;

            const speed = 0.15;
            if (keys['w']) player.position.z -= speed;
            if (keys['s']) player.position.z += speed;
            if (keys['a']) player.position.x -= speed;
            if (keys['d']) player.position.x += speed;

            // Câmera segue o jogador suavemente
            camera.position.lerp(new THREE.Vector3(player.position.x, player.position.y + 8, player.position.z + 12), 0.1);
            camera.lookAt(player.position);

            // Detecção de Proximidade
            markerMeshes.forEach(m => {
                const distance = player.position.distanceTo(m.position);
                if (distance < 2.5) {
                    showInfo(m.userData);
                }
            });
        }

        function showInfo(data) {
            document.getElementById('title').innerText = data.title;
            document.getElementById('desc').innerText = data.desc;
            infoCard.classList.add('active');
            cardOpen = true;
        }

        window.closeInfo = () => {
            infoCard.classList.remove('active');
            // Empurra o jogador um pouco para trás para não reativar o card instantaneamente
            player.position.z += 2;
            cardOpen = false;
        };

        // --- RENDER LOOP ---
        function animate() {
            requestAnimationFrame(animate);
            update();
            
            // Animar totens (flutuar e girar)
            markerMeshes.forEach((m, i) => {
                m.rotation.y += 0.02;
                m.position.y = 1.5 + Math.sin(Date.now() * 0.002 + i) * 0.2;
            });

            renderer.render(scene, camera);
        }

        animate();

        // Ajuste de Janela
        window.onresize = () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        };
    </script>
</body>
</html>
